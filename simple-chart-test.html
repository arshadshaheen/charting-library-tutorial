<!DOCTYPE HTML>
<html>
<head>
    <title>Simple Chart Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .connected { background: #e8f5e8; color: #2e7d32; }
        .error { background: #ffebee; color: #c62828; }
        .chart-container { width: 100%; height: 600px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>Simple Chart Test</h1>
    <div id="status" class="status">Loading chart...</div>
    <div id="chart-container" class="chart-container"></div>
    
    <script type="text/javascript" src="charting_library_cloned_data/charting_library/charting_library.js"></script>
    <script type="module">
        import Datafeed from './src/datafeed.js';
        
        const statusDiv = document.getElementById('status');
        
        try {
            console.log('Initializing TradingView widget...');
            
            window.tvWidget = new TradingView.widget({
                symbol: 'Bitfinex:BTC/USD',
                interval: '15',
                fullscreen: false,
                container: 'chart-container',
                datafeed: Datafeed,
                library_path: 'charting_library_cloned_data/charting_library/',
                debug: true,
                realtime: true,
                time_frames: [
                    { text: "1m", resolution: "1", description: "1 Minute" },
                    { text: "15m", resolution: "15", description: "15 Minutes" },
                    { text: "1h", resolution: "240", description: "1 Hour" },
                    { text: "1d", resolution: "1D", description: "1 Day" },
                ],
                loading_screen: { backgroundColor: "#131722" },
                disabled_features: ["use_localstorage_for_settings"],
                enabled_features: ["study_templates"],
                charts_storage_url: null,
                client_id: "tradingview.com",
                user_id: "public_user_id",
            });
            
            console.log('TradingView widget created successfully');
            statusDiv.textContent = 'Chart loaded successfully!';
            statusDiv.className = 'status connected';
            
        } catch (error) {
            console.error('Error creating TradingView widget:', error);
            statusDiv.textContent = 'Error loading chart: ' + error.message;
            statusDiv.className = 'status error';
        }
    </script>
</body>
</html> 